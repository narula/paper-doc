\newif\ifxxxnotes\xxxnotestrue

\definecolor{xxxcolor}{rgb}{0.8,0,0}
\makeatletter
\long\def\XXX{\@ifnextchar[{\@XXX}{\@XXX[]}}
\long\def\@XXX[#1]{\@ifnextchar[{\@@@XXX{#1}}{\@@XXX{#1}}}
\ifxxxnotes
% Show XXX comments
\long\def\@@XXX#1{{\color{xxxcolor} XXX #1}\xspace}
\long\def\@@@XXX#1[#2]{{\color{xxxcolor} XXX (#1) #2}\xspace}
\else
% Hide XXX comments
\long\def\@@XXX#1{\ignorespaces}
\long\def\@@@XXX#1[#2]{\ignorespaces}
\fi
\makeatother

%\newcommand{\nn}[1]{\XXX[NN][{#1}]}

\newcommand{\sys}{SystemX\xspace}
\newcommand{\xref}[1]{\S\ref{#1}}

% other style of commenting macros
\newif\ifnotes
\notestrue
%\notesfalse

\ifnotes
  \newcommand{\colornote}[3]{\textcolor{#1}{\smaller\sffamily\bfseries\boldmath[\ignorespaces #2 --- \smaller\textit{#3}]}}
\else
  \newcommand{\colornote}[3]{}
\fi

%\newcommand{\nn}[1]{\colornote{red}{#1}{NN}}

